---
title: リッチテキストとしてリンクをコピーするChrome拡張をつくった
---
[Copy Rich Link](https://chrome.google.com/webstore/detail/copy-rich-link/hikiamlgpdcabppakpmemaofmkgknpea)というChrome拡張をつくった。

使い方
---

拡張のアイコンをクリックするか、キーボードショートカットを呼び出すと、見ているページへのリンクがコピーされる。コピーに成功すると、小さなポップアップが表示される。

ショートカットはデフォルトだとCtrl+Shift+L (MacでCommand+Shift+ L)、これはChromeの設定から変更できる。

![](https://lh4.googleusercontent.com/dbRLGNTJ09-Nu0ih3p_bPfl4V9_InjGdivD6s5kglue8PqBgEhv-ntV3YlWgPdCRZHeYMWh-a2UJo-ntMgiZdlYCbQ0P_VfSXsSKj5Cap6tz0u_A-gR-gYapqBRL-RkRs2KDajvT2okd8R4PGQ)

GoogleドキュメントやSlackなど、リッチテキストに対応しているところに貼り付けると、いい感じのリンクになる。

![](https://lh5.googleusercontent.com/InNCzx9HjJX5vyyBPMhsngdp_rC4bg7ykq7ceTLb70hf-hG1HxqD1ONKhUKVapz0vC3Y6qd2XFavdee7ud4Jr6FOF8hOqQjH8bYkYpT1Afs4NZkNjD4PUiTuH3fWZAfCeXCmDXSSTcU66ODIgw)

リッチテキストに対応していないところに貼り付けた場合や、Ctrl+Shift+V (MacではCommand+Shift+V) でプレーンテキストとして貼り付けた場合は、「”タイトル” URL」という形式で貼り付けられるようになっている。

![](https://lh4.googleusercontent.com/qSMcIiBWZyRDRZ9HN77YmtvAkvT-TdaBQpXdz2dlk4w6yiX7ty0KMabiibik241D6y8K2Y_jzYUS-1VLTyDCC2eevJLIZ3wXO1h6FfEeHFoKBGVWBDuGQ0nUwKhNORomwhMN6aONCJgHnS8Dfg)

開発の裏側
-----

つくった経緯として、最近このウェブサイトの記事を[Googleドキュメントで書く](https://r7kamura.com/articles/2022-05-04-diary)ようになり、もっと楽にリンクを貼れるようにできないかということでこういうものをつくった。

[r7kamura/copy-rich-link](https://github.com/r7kamura/copy-rich-link)にソースコードを公開している。また、[Chrome拡張 つくりかた 令和最新版](https://r7kamura.com/articles/2022-05-07-chrome-extension-dev-2022)という記事に、Chrome拡張のつくりかたについて調べたときの情報を簡単にまとめている。初めてあるいは久しぶりにChrome拡張をつくってみたいという人の参考になると思う。

今回はクリップボードを扱うプログラムを書いたが、少しはまった。現代のブラウザでは[Clipboard API](https://developer.mozilla.org/ja/docs/Web/API/Clipboard)が使えるのでこれを使えばOK！と思いきや、これは特定の条件下で動かないので利用を避けるべきで、結局は昔ながらのdocument.execCommand("copy")を使う実装に切り替えた。
