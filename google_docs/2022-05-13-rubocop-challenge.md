---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (前編)
---
前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionの話をし、[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)では再実装した[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionの話をする。

ただ開発しているだけで、.rubocop\_todo.ymlはそこ此処に積もる。たまに慈善活動的に解消してPull Requestを出したりもする。しかし人力でやっているとキリがない。この作業を自動化したい。こういうときに便利な、[rubocop\_challenger](https://github.com/ryz310/rubocop_challenger)というGemがある。

便利なGemだが、設定しようとすると幾つかハマりどころがあり、導入が大変。そこで、簡単に導入できるように[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom actionをつくった。

![](https://lh3.googleusercontent.com/docs/AG8NV2bc3GQu0HR2L8UdT0b8RTphONPM7JY4BLaWMuye1FMKkikBawoaRvEhAQZOqomgCHn-wqzP15HDi95pf6grk0rLh-tOJNcX2qx08oTRxSXlMTfLh1E8q4z4YLtYf3tR-a82JzEz76IocK6r-H89vR-XG_IhM8rSmXA1l7cKyCNKcNEwTrGq0-jQdg9g64lLYbkD6h05YOefkFvAfjLOjIAZKpeX9Yx8ySlTtJvOqCOeG_l5RIkL7tZNM44OD0Zryjz_mwbk97FsvDheZwxOZaco0g7j1CR0C8Wuek23Vuw7aDPBXsVs-9zyR7PsN3zOZXyEt4BdxEByaIEAwGrdQ_oOjBE_pMAjlUiGKoHJlRqlUm2Odq5lSz1OCLjMRW5QZW1yJWxAknAmoASVYAraoqes1JADT3XGsRG7M7QSWFkVTATisNHwta-T0BMfdPvVxv0535AfjhIxgaGGcsc--qOHguRx5N9YSk-XDosL2qF_UsDsUhmaS2kbYD5K1TAKZ8wcxR6SdWA_D7FUWTEdyvxBP9PAzjVs-AkR9giaNN_G4pEAZ4RWh3CjfykFEa2-Hhw4zGMXYwzTFo8SDF_jQ0h1BMgLhuUg-FFYIC0lQ58twTU608-jckU6TO1CrqxxZaBonKl2297Dv-vtVwG_EFfXx79GLBtXFgm0-7JZK_iOUfRDv8Q-RkIQC1cLAF9joNLbRKRQ5Dn1t-qY11_MJQ7vUaoqIa_2SHEGdfjEf8TqfMU9UwX9n6uM5G62TUnHuAKEOOlOtXccYwXcWjQFvGO5_CMcKxvZsRlJJdsBtnl_T_KpilGUF3-qGa8c1l7hN4bZbucRZc8wOnQ8Uz9uQydgBk91YhyP9rp8GwP6NioF2FeIz_WHT4aYvPj9b-L1GNVcd70GIn7LzZhIdVor1DNNJ4h0oeHrilRRKlYhK9A9iPLN4sAUFQFbegWtjBq3ECI5ZVF4dX7AJV1RlDNP4X0BZPOq2_PbE1vAHQ0oi9Z9fpOYwrNf4qdCvf3pztaF2h2uS8OPKaiizYvE5OwCryWNqLHu6FcUU8dnftW2BIr_SxGPucTm8uDs3hAjiZzfOIlepbssUtkGewZZo8Ikl4AASM5VdhtLXYhmmaqQpu7IuDlPuXoJxN5IUBKMEXy53sV2499IJYkdqv65qxm_amG7hLiIQ1htjTYiDj_D_2ik86Hd7cIMMdi6CBnEbkFwHsrFqtY5rY-ZkQ43JruhuMhAeCxBH1ijpnOCMCJ4eyCHskcG)

READMEに書いてあるようなYAMLファイルを、適当にコピペするなどしてリポジトリに置くと、rubocop-challengeというWorkflowを手動実行できるようになる。

![](https://lh3.googleusercontent.com/docs/AG8NV2Zt3PtDFnwVp-CGCaGqPcOj0NMK0gt6yiaKAfUnWKyKq0qobczRSQotw47U_yXOAaJCAFZ5hikGRxllI0dxkFLCE6BDHmgYOr4L5fDsjtUDG3ktlfX8U4boN3LytIS9VDuHHQNyrMchrNVPuU3ZHrD-fPIwszkyIJmu5VueXe7uhJmcJfoVj571YGg43yJZ5bSJ_bF3TdwO-M-VZmqa-yaoBpHaH0piitSBP21bz3tN8MRjW8gFcfUKm49noAB5pEq6v7DuWPzFEiE-xZiTPzZa7UpW52l2QGHza099hgTOwvFgKQjN4u-IxLOpv6oaygn4BVZZ3ziZmeJz5ty6tESyZ9Fb00zHuosJvXh_tPHKMriTKDa8Fbgb3-RCNEaY0PHjObb85yhDa0mCOzTjH1nO5FzPycJdaf0CwrvVBusCODr0UUsExGEqR6NKgPJdffpPu570wHkcAUEcIzSYDKvhUbBrAO7v3nvQUEta1sVFIY4XR_QJOvN6wQGjR8McOORCbZq5L-Kz6-G2cDzsXkiYB2cPlidG402s4T1g1u4n7WEDDsUbvXbgYdThSpxW4ke0eObeCdqIISiq3pNv4otp41IDytmNkm9IbejIsbT6Syiku9ihkUTIx-2AfSbF87QuSjFw29PZRL1CqkCJj01j-dAWNUzPwNSENP275nGwznPRPU1mIpjhFP_GyvmuY0xj32Zot-v0nrlbtyWPdqbxc4-GZ2M6B2hPnLtU5yRcWRIC7fHVUXPof9NYwtStCUZzyhgjkff5ihDZVVXKc01Y-SOabgjZXYP2LEOVTr-OpV3jNNqxC0vzcoX4M6oOGzv9HZmaKJZ9SXw3xYOAD-HfmxsXMkiLn1ruzEkljiZ6EhMjMVhTIDOHXFeGKpvf4vTDwo8UCXgFEjjcn8JPocNsfMtErRlOPagpFvKaRAJeD_r7HlYmWPPwwheX_EQ7O1etD-vOsNxlgs7CN9A0cagVLAf6chrdmpvnbAeQyZsAMmZZY7ADVFUPSxJalIs9ltH4bXHpht3wFbEJgO0nvtANbpx4IC3a9iuTMW2mcz8di45_fPnAovZTtxscJamr0nTfTumJHSzaUeZrYeOlr47YiFShHdJynAtytudz3dJsG60qMJPj5iy9Rao3pgmSI5We3opZkHCAesTUiAsyzqnG0_CHzIsNYhhZN8cZ0-yJUJN9WXO0MU5bbvbhsAjGgpeDM2VZeWgQKPP5PbmFwSDs90MOQROvge6k3mo6Zs2O2E5U)

実行すると、Pull Requestがつくられる。デフォルトではランダムでCopが1つ選択される。実質無料ガチャみたいなものだ。今回はStyle/StringLiteralsへの違反に対応してくれたらしい。

![](https://lh3.googleusercontent.com/docs/AG8NV2bQo2X4nGr9kW0qwoCrO5MZ-tiOYTMGLXKTUKFV7j1ZuVlyZ0wN5Ft0wjRWuza8tZXWDp7DkibU-4wITA0wTnBfP4aZGl5xYLOHoyyBjDrIdO0IMyOq6gqK7fQariXOc6KHOTH6A3sIf_vYbbqI9OCQzHB_6c7bMmcdQ7U_K6g041hZDWNfg5X2UPHemWN8u61bFy0eCzr0Kl0GFG4XJUGOmOrfniMUIlxAF29CtVbznxW-RCDVfs-lEk0h3lZBUd8wFG4o9IiH642TQXyGCaxmgXxlOsZyuJjEe1To5J1MkS7yJuuH5ky7zjiJJwOnKLvHDpgsYmm7DtqOvis8JkIvu5-EniFSkIPJZcamCbDdWDTmHMeYWWgXXzWVeEdliTOSTxaKnyFzES-UyqQNqLeUr1Wfwn8uEiXxikD53UggRKSkVepWzoT-7mthVaAW5lLTxMXGBVTdd9Uku_hv-QNv4eaHUuKKQnlCqZAj_8q9ATFqMFgUdvnkfTAORiO7_LcbYClmNqGdUeOHppa79M1Y0ZWcbZtH0oupZeHYTXUvJKxYQ3ccxuAm6_PpostUUoBNGv7Ro_3KQxsTkM3QFVWA1pcHfnBo_DfF8r7i1W31_ZJMov0L0slCDEY9b17v7PMJMuWXf8njBjBAo-rNS9ndOCUZbgikPoQLn0zJ-jz2FNNsmHk1qhSrbr1MLaHRN7wFHbX5sliBCZex5BE6LOuSvABmbowfE6SwpHLCaRMDv0AiA2bC8rQ07BLySSA6rg6cd2PZGX2hGvhX9YDEZpLYJRWM9YkgUGUciFF044-nuunDO5A4QJpGy0g3J85RxgOrB7SwffIZFD_cJI3XdpcDfvwt0yPHC3Tsn7W739o4pqaTQ1IduA20mO1f08rCXJc2O-5WcBQU3b-607u1viy4R3lI1IGTrPXhuyq-pOKmWgVE84XthOb69dxVjjkjjp7yi2QmDrVL5m7wV73G0IzafPWZJYo8qzL9bLY40F6N-cJDrHc728eNT6-K34DMgq6ALkHaxTuk7YY-Afb__ryb3g2Pr6842DeL3D5Nwy0ipSMQSQxALf_JQvRVYJwN-XpSHTOPDVKhxlz_q8A8f-Iqxt9NeLP6KpVRxcM3inw-CnaH2qb4ImXCi4l0t9VQ4VLbmLYOzpBicGN39YQODbdbHFZ4keJbsQhF46iQDsq3wjPd1ImR24da7nD8CNmZ6QoRjRhOlTJkg-R3qUMe3If-8dxXcVoUgrJqA5BOA226Nd1E)

差分を見てみると、.rubocop\_todo.ymlや違反のあったファイルが自動修正されていることが分かる。

READMEに書いてあるように、手動実行はCLIからも行える。GitHub Actionsにはスケジュール機能もあるので、慣れてきたら定期的に実行するようにしても良いと思う。

[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)に続く。
