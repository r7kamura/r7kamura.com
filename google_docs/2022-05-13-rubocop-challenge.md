---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (前編)
---
前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionの話をし、[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)では再実装した[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionの話をする。

ただ開発しているだけで、.rubocop\_todo.ymlはそこ此処に積もる。たまに慈善活動的に解消してPull Requestを出したりもする。しかし人力でやっているとキリがない。この作業を自動化したい。こういうときに便利な、[rubocop\_challenger](https://github.com/ryz310/rubocop_challenger)というGemがある。

便利なGemだが、設定しようとすると幾つかハマりどころがあり、導入が大変。そこで、簡単に導入できるように[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom actionをつくった。

![](https://lh3.googleusercontent.com/docs/ADP-6oGTQbix4RacQOrvYnxGenf8JJPR8_5z8JIJ5bX_JKw3F_xkvM0kpEmp8Y7ZWvfZX5La1LgOEQj-7fc8xTzV6DOt0g6TnGo9CQlpB6-20qXWEnxjY4Hx9MkG3x6ECWUPw0PeRUnUVMPk1rLsojYVE4rRzNlv0cpbgDJweTuwAsa7EMA8TpY9hHQFvXkZwgAGei_ZFnhDGvzF1-FzlYMxUsgptLZvFe_mgVtFz0iQpnQBqL_aMlOyz3ak3DwZcWXmPmv-ETVxJU-hYFnIya7WKRgm4GQIVbNEq08437rSYj_QXaRCk58cj1WN4W1NxBHj2lFtqGC4p41z4h-ekiL6bzXLCHhQw-vY1hjqgo9A8NnGAAor0Dz62ZwxCYMyAjSGXlDiHR_4nAF_HVD2kuueUlgK2Ng6kr6IsiHUbnQy8-nRLV_2X7vt6HYJ0htx8EcRBQ5Ad7m7iSmfUJiFi5PYWqz-WvZaeBjPD6rO6V6bcHfGvVo7UmI1B28MPzjgvvS4vsIVzcuFuuyu7QyHd7lblFFChK2Mx7jMB5bQ5mI-2mZ_4QwOdudpxwkz91yfoIh6e2hJTCUIXbNGBx8VmYDzy3npBc-6iNWdkaytrulXatqj34jT5do7q_-ZD9XF-O8JWnMv2WrxXhl7HpqNm6VZdPlcl_2hsGfwDdgo8fTqsB0oxP-cikV5MDzRPzme8pZyY5-cSACgRQKCT4hSKvO5KFsbsdLUZdmGriOWfUGGMuS1puIqkq4Mh36nSa_WuAiVlmiWO2j7jAUbclyU4yWnuojukD0s8VKZMpfIC5Kidi9OFSBzRB-nObGYHJDc7J4tFf_0dcByRdY_7uGhdmmL787wvHWiJ7Q4RSnG-wAtLsVf1Cg4IUSH2-rTKIrEKbR4wT20AWC9hL0ZL12aYM8nJaDHIZ7Bn_3A2Y2MRbvZc-jsmcb49DV2Ip4U0MDgTSU15iX33a9QjTY5LJbZM99nRpjGIHA8r45lWWySAtAXla3ZDMuCq5QENiCTreaOAntMbkrQqf3zBieK6vjKjzehszt3xmaUgitfMqkDRh5jiu8Mo8bmzlDRX_rQAmFoFTL0SJpcmOP3ub26KW-DK6JvNjOydp52g2NSZZr2ztJhwTrM00nF9qQWPbnh4mPW0c30RxAOkcGkASygW8WnPn3CVlSK43979R3LTOk-4k8czO4Qt9-z_J1HaNko675UfhFFRsHHWOPXzW5Av8lv5IsonFW_rOe0b0p1Ocon7qXfyx3KOPIq)

READMEに書いてあるようなYAMLファイルを、適当にコピペするなどしてリポジトリに置くと、rubocop-challengeというWorkflowを手動実行できるようになる。

![](https://lh3.googleusercontent.com/docs/ADP-6oFNehWenShBmLrrvhyGuCRh1jDQCpiBVfky0Gdo3zynRwU61usNwkeei77izsKrGwCahu1t6F6uiEnGiKJ7SCpQau3KFSRMSX5Wt7KaJtDkReSowSfPM6ZWu9qro5jDa_N42NIZiQmnymZAgoFb73wVYjnfSbh0zsROu8Do8jGY18jP6jlGNeTwa2qVyd4OEyfmCiwCqdgTVG62i3NTxKGIGxsCfgTr-rDGBCkeEM4Acf6QDYU5yNeKL5mYPnuwd7CEq0TD8v4ZGhSyUr7szg7Aa5aBpwH_yj0phhqcZA2k4i660rsbCkH8B1xAMn4EROvlKhHoU_ykOKEmT4aalFZu2GZJsiau9nfbl6Ri3ckYfb9I7dl6yOvcSlLQebkJDJLlI22hI12_O1Uq3g5_6CGbwEqkyvC5JfE8xG5sr6S_kcfssKhVRjua_oDNVoF3MYjFiQIP9zxXJjX9YhSeEtuMjCXIFugARNk32BQWHsvQmLkqvODEyKBHoNns7gwfGCsWPcjkIvaGAoAIfpC45v6HDf5as4nCugOxTS3dBoub1TR5hGvMYdSwWYYfYtVN4Mw8JA3c2lnFTMx7EOEcSTeFSX4ZJaG2Fzlo6Ve2_N1nucN3IIPFdN86LkSCXLoQLhQUaevIjlBlBnrrhg8szuKZPMYnz3-at8K47N-lHSDDX4LtDFLEIAlMyWQ2HP845GqMg5De4h2DNIIDCitj_LC0SM5CBJlHFTIGtzYUMWc6cMabm02A_VrH6YpoQROph0WTtP8g9aZPHYVYOqA9SWK57GvyXivnejv1fT80JjqHX5OZ9EgOKku6WunN6-p8gSEZqW_M_pviszMzRHO_ed-t4KwSO5qjheGzvnIopEAj_z2CgpsQZM3xqm1iGGpy5SrjMw_DI8nha8jHZiYcosXZulFnkdbklS2xjpWXY_Cp_UnuTXbaq5gxcly1SBERd3VNn39El1rm13pVpGOlHYTIXPVcmjEZhmmSgXKNCu8elOzPutqN65QMkmxNmAY457I2-xzIPMLknI8cli4__RB4Om87G8LjCgGzCqNf0qDAu9GXhbWrOhxYFG4ImFToi7LmTj__AOUtxNpCK2hse9NlptvXi0AslO3dUebgY8rV0__lmL7_yAtF9XyKBHEZnAFmoyWj3dv_k88OXJ_Z0rfuN4xk2zYRrD2hEMhFqDWELe-ueEHV9YBMQwgJPgoKbQFDKtLppYHhgN82Ydi-BHKXQNSNSb0K-_v1bAdX928yY1zI)

実行すると、Pull Requestがつくられる。デフォルトではランダムでCopが1つ選択される。実質無料ガチャみたいなものだ。今回はStyle/StringLiteralsへの違反に対応してくれたらしい。

![](https://lh3.googleusercontent.com/docs/ADP-6oG4_vVnrvC_Hmg3nedAmDA7cP4kFT-_BEtEQfZTXrBc0D_qXMBoWFOKHi0oujmIiSm3tUGPUKKkEbi-JJTmlHBq-mRm7FAd72k85-XImMeBBlEcie02djk3X-5PAIO5txDg4ieK2ckGtcv_BO_z6K94wiEPm_kcmarjqrz9OI3AgkXlKrh4BI1Xa8M0DfpNxOQWpQlKh6ZQNtjK6c9kblo1VVxxlfqseohln__CHuB5mJFdtzNX919h7CdL8l5-W-k98Rd-LEKTmOuHkZ50EvBkUr18jLN9RcFUis7vPeDUrn3KrqOFpMokcnA6A3GF0-i9FIDf2TqEX0qKOtPOiIU56XObbMwWOgf4gUcYpJPaqUAlNtFwfeCdeOxIzWBjMU4r3aUXe97ba5nFbf6UknjqA0jLxXGjZgSsdfqd3brhG0pge0IJYnltiNN3RAQgLV4jsC71xII7UDLWgbbu0ozFzvWe2XCegV3210d0-nV-pm2QxQ2q412YAXpv1vXk2x85LG7y-KWQggFSKpeGXSqtQb5VQNz2QbH_vvSFXIek1jdN-F-4IWOSqF44sTL8XNtER895OeTsGAbmK5FdpgDD6hOwmIWANV098cXm_L6zjiIcNunVGXP-BZ_ezrPa29QoHAOukFEkEJDB-a6BomicTpdzqFDh1gmnS0aae5eFiQ3106P_FFUoNPPuPkxDc5BaYetiu0m5AZIMQtWn3rs0C4D6Sh05KAXDi2PH5vJQ_8ptuSr5ZBO9NIsH1GIOjL9yag3eoyIuqks_b8qMg5tiF5f1K5y1CLVir8nIodQnofaNfimbvD5xOGSu157bLx5fkUkDAiF6_Pc9-Di7z1NQsZzluRzIKDjwlXZYxEjaN0CluWOaPDWc6o92Skh8bTBxZnegNWpUDXI1NG8ngOg-XbFCgTmD2GgUH5DfHFrJF3-vNYFyQtsbn-XSDeY3xYWYRRFxm-D__GclmFIL3BEzKSU-RSt6BZgsGrTP438fMjbRn_5HrvyMLW-go_2CgJ_j8LwQfq8EKGGqJB26IXHuXlSnpalsKk0m4Fe-bZETbIYJA3BBA4mSg8Sm34kN9N0rrH9trlnpmE2NiRO2vfugxK_SDGr81bYLEq9B57EWnivgbvIrnhv333SjkOYaY4k6jM0vNjJPJBxJQM2NLr9cN741fNIlPM6KXUehQH2BGVP50cza3S-gyxy3xpYqS35CpMFdx1FoCDL0iAVu9E_CitmMnbLCdO3IXa8E7BlXuK4S)

差分を見てみると、.rubocop\_todo.ymlや違反のあったファイルが自動修正されていることが分かる。

READMEに書いてあるように、手動実行はCLIからも行える。GitHub Actionsにはスケジュール機能もあるので、慣れてきたら定期的に実行するようにしても良いと思う。

[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)に続く。
