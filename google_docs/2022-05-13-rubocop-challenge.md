---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (前編)
---
前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionの話をし、[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)では再実装した[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionの話をする。

ただ開発しているだけで、.rubocop\_todo.ymlはそこ此処に積もる。たまに慈善活動的に解消してPull Requestを出したりもする。しかし人力でやっているとキリがない。この作業を自動化したい。こういうときに便利な、[rubocop\_challenger](https://github.com/ryz310/rubocop_challenger)というGemがある。

便利なGemだが、設定しようとすると幾つかハマりどころがあり、導入が大変。そこで、簡単に導入できるように[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom actionをつくった。

![](https://lh3.googleusercontent.com/docs/ADP-6oEY1czfIjxC-1lID8OSKjzIIslnU_fNF-gW2XjYUGsbIevGZ378dkjjZmQxGU5C2oubpTlzNd1Zo366NCW0RiGPnq6IpQF17z-0ldZ4z8G56op__bEPhOu4SIpaUgTWU6P5BN7rFbEBGAvvmFw08dY8EMU6LHstu2yMRroyBLfNh9r6m-UJnk-Mlc-sgMtiBTkvga7BoJ2a1RCyU7cLk3RcNc3gxoURV9Z8ViVp6hv-gN5Ywstm9xo9uaZP4OAHuvAqdk571CMQV7vmKMZKRR8_fe7iJvl13JxLilo1AH6zUE7AhwKoltwJeTr9FPv5q_xDDHOI00iCVY9IMmW3W17ruvp_7Xopmj1bGsM_aChPtDJmWuUZk8cpChos9e29VhCIxnATwmqsxUPO0qNoEJuwG9fOb9JbzajWPB8FLPGRUJoxvi-7wOzqwcC8LoEmv7v-h4dRh2Mz6f_QhYVlVDW3hgFzrQdbpYZVUfQFa1q6fne4WDcw2kcHu97P5PYxQK3jAOsjZsGSOa56H83-NpZxOVeM-dwskpMeOzw3OQfboIkIqE4XOFwG-aJ1r_okSqNZ3ozdhsbqSCyIUQKUYWjGyAsY5uu9nxxSnCbN2SkDEjp5hsOGtQeIxOBWYEH8enSfZhNPdPJCHFdy-Oz2wLpj-d_nIRtmdMaahF_uZZpF2iJxGydoh4RC6wlbQ0Ut41e6aKHr6XI5SqGIuyYoOZUSx2fATs_LJWabUAy-aD8bSzTM1TzaSb96APRVcKtxOQVlV1yvQBI-cA8LBeN3OSbZg_F_y2sE42py0_dP287VIOBZ9dWpBNYGUpZr4SH6P9XM37OqSQUHUg_mTMj3wzKvOOt0PHO-27suOe7e7Gg7RWbB-wkThYE9PdM_8TJKm4Jwi-w0s1Bg2gc57LaHu27-Ws9z1BhnLfAg6X-3MKCfgHuavvJnq8GtjjFJsrQBciqOnG242-4ggqUK5sOzOYNoLSKsbSfB8MMRC7RwGthJKcdlkIA758xAGtdz8o6T0CIzw3cE1a-_I4CFR65nT0HEcSL6k9Haks0eg5WqLZXHZk9v4p13UJQMmA6Qjt3rmJx-qFqXUxlYaA73VMvPmQIpAR_NTwLYOkGrv0d5FfciCCzQVgyMQUcLJKxX9EveAClOlm33r-YsHWp-oLodh0w1FXiJSTEuY-g5u7-MMgrNgeq07eJKSjcnRjtI_U-p34xbti386-OKqbiCQsBk1r6KWDL4hWMn4LjgWCZ0jq1ikYcy)

READMEに書いてあるようなYAMLファイルを、適当にコピペするなどしてリポジトリに置くと、rubocop-challengeというWorkflowを手動実行できるようになる。

![](https://lh3.googleusercontent.com/docs/ADP-6oFy6L3PpxRH-lhGu5ByAstKed0BIHuB1CetqJBHRseCe8Y3vzs3aeioCtgw2GVtKdugyVLqGsQZ8fiGAZFmw0sueZkGmI3j1jheOKN1S-xbCxbp9T3IsSCBGtwr1NbwWGzHsK6gvD7ppZJYSA4BzW-L-6gQzed2_lGq54bYmEa0EsTr08YshtSgDzUuuZzRMvdcOdxBK5VAxa4srGjDfDnNy04azzWgR0F7O6DPJlqRkfupSN4I1jnFkX88UwCF24L7u4zI6SpFiSGlMIf6Ju2T3GLThkG5zkGXqF6Kh7RHGdwgt6x4nQMt-jxzZxzHcj0-1zMPYrTH79SY1yvUxHnV8EknLrxsIXo2pEA6pHwkEAii_mEeybmBIP_iDSsimUhZKHofgYKHsNOko7f_OMGtRDwIYtGmiCYVvQBTufmRIyfHEAMF6O_x6vXxqAHdrlujprzy6-C4_AUMG5aUOoN2IMC81oJfbNabawySVzWYYPNPiIxlQJDOgI0t_gKJBlImdYJLS3C_ahF1CZX8K2cLD9mCntIMSRBxZqP8mgnavpaY5uAxGsMLlDZlcwHbgPSANbCPYrBUJWF6VhUVFzgkbVE0dajk2cK1au7j1Bu4B_jogH99SiBzo_2NXte8_UCzKYkMNir9fVViClOrYNfNAg2QPYbaZ8HwRMJWmPAEfYy6K0yQoxiHi2UXbIwlaXWez7dJ5DQrnKFizOKWvzBsKOg84EGl8lYNhlo2pAE8kFL-cjPabMEW1yQ6KqfjlgUVb6cLdD6o4TAU0QQWmhaKN80UG0XoDpMYJluamiNPG6O_VXEVI64NnqBvQFZ5-Xt5nksACdtPBgl6cevWVkn0IflOwKIVJXKV_f1n_oSAObZOk_2vLk1HBvGGEsLu5_AFBKjCPunozlD1ExS-mLI2iSDaJModr6l1uxFgJzQ0bu5Vx8aiSO2B_tlO28B198EgM9GFYVxdLa41qX93RWE0TG4Ad6Zk5I5-0tmlHFa1uOllppm4h6dVyKFTlP20h2OVlWQNu4Hx4eU6StCUISgqAmRTjgsgzp_kZOxvjIYiC6yQnad7EfnqGpWt92bFn0g39rK7EGWb_iz2o1PNi_c2KG5TOtWp4Wv3_87TcJeTeDFdINOdIh3sw0LOGcvxwhlWHsZWN7DJwi1TR_ldtZ6pP2o7M7ed5Fsuz3OYggNR_pSMmxqlpm1WxUh6dE8QVlhbGG6EknB5wXTjT9YOoxNiUsmOzKDt_2HUOoS47QjIrjMk)

実行すると、Pull Requestがつくられる。デフォルトではランダムでCopが1つ選択される。実質無料ガチャみたいなものだ。今回はStyle/StringLiteralsへの違反に対応してくれたらしい。

![](https://lh3.googleusercontent.com/docs/ADP-6oFn3dp_QBWCdm4XjexChJ0w1uJS7zoemsVYL1F2EI_vUsgriJyJVCu56x4K8Immvdilnbb8i7JU95VXUdGfOg1lgqsEnDXm82Gy85F57AXGUBdbX7M4a_ZCytceW6udA344ouNcerNY2FOtnaB_rfEaKzmY7kZxPTojtnViEVeOErXi886xm94T3MHmDvhKwMfFZXH0w-K-zJtZHPekAA-n-a0bzQWNOkBf7dIVJcA2fsFvDM6pyJ0FFaI5Yjw0-hCkz0kv3mW3mzetZOozAktsa5fs8KS_wloOZVatlEQN7hG1xjCxcbArdvY80HjFCRFKlMfuJmHV4KvJTuvO2F5H3PuImboo-G84ssHGx6vhSNxZCrTpz2GjfXTvlOJKutKUE2rlxHdP3Ius5iOeVo9yU_ngzNHVOJpMoJCSW2wcUtflxL-xVQlQRW_D0nIodd0RMjLfMf1gqmultJlpetSXF4mq6i1HO-tmYya-77zxbvytxpTr7ZQ1k32uN5UH_Oszt3JGFgoq3vBiAIrAekPLUaCSVA-4rz4LlIaDrGZQBt8eNf6phEtIF70oucmr_zr8mLq26iLpqyVlP9nUNJGAfdq-drujJ1DheowDE86W5avCNPPQeEiKAquBp33f6WJ8SzPfsvF_37HI70ScXK0W7MW9tgsfmM4GlEHFuQCJB8v_4aZ0n7Y6dhKERtpnCI4yaizNEj95Z_mpAoTi_Osr94VHMANEEFZPehfLLdb3r2bIUWAG38XuwDwTOlCtt3vOi-iUR6qi0W067KrqKR7_qcUB7P_YVQFLFxSojap5Ri8bNYQs2FlTGHufHLlNFre_TbaMbUcKRJKJHBaNXVPZhijZFdJyUnx7ZZ33UFVBOK50GHK8zcdaWqLraic4HmLTmDnrtvNDufGEJg5WrWOE3Fc2hmHx0TXk9t1JERVF-EfrOcAf41L9PhOTxvXrSy44XHmj0B8dDr2JTKGqaWaSg5HuFTq6WAwCcFxeBwlB3zTXCcAMrU9wx7rngcaF0TSKYw38BtVW55a9j9x_uF3s3xhQKWzZopm6glm8O85RZ1IV8y4MLjO_l-s-rHF6_XEa4Uq6L3BVYVcN8EOFZbxPEq2iSWGURYF81ypI17qTKviGPPZYJQmHXJv8B2ErFL9esivK_engbE-O8jACHDf_N8RQbQ4ZHX_5-UbKU0ytcWi8Anxe9NiTWOf7lMJcRsdO8TevqkA0XEvpvM04oKb3igEbS1P6b6_6vF-qVLjquYaq)

差分を見てみると、.rubocop\_todo.ymlや違反のあったファイルが自動修正されていることが分かる。

READMEに書いてあるように、手動実行はCLIからも行える。GitHub Actionsにはスケジュール機能もあるので、慣れてきたら定期的に実行するようにしても良いと思う。

[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)に続く。
