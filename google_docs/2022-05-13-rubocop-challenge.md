---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (前編)
---
前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionの話をし、[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)では再実装した[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionの話をする。

ただ開発しているだけで、.rubocop\_todo.ymlはそこ此処に積もる。たまに慈善活動的に解消してPull Requestを出したりもする。しかし人力でやっているとキリがない。この作業を自動化したい。こういうときに便利な、[rubocop\_challenger](https://github.com/ryz310/rubocop_challenger)というGemがある。

便利なGemだが、設定しようとすると幾つかハマりどころがあり、導入が大変。そこで、簡単に導入できるように[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom actionをつくった。

![](https://lh3.googleusercontent.com/docs/ADP-6oHmQgPWcqxoE5CCc2YS3adKCaE9_stSZ_tCp8Pfy6iR8tY6Jhuf0m7Dci4p_B_LeiyWs7OYoxn4s2e2haf7tAnSJSgTV4BSp5zTgOz7e1N5Vz0Mgqu7VXd1XFNLBk2f80jeCbuC4lVUwYEwrbySTACKvhD8vidAUtqOg6Nk9yfju-T6jZ-g7j5k4ZJOpYdUiw-l807ejrRsAdN6kN0_7l9x5mxJ3Rg5SkXJiNEhi7lcE84xTX8tpKPndPol1BwoHhwV3EU8rHwJmjEnGR3RQIwNvjvMIQSjeYad35tIxda_Zae9B_M3lOojKBFhbn9PF6g7wQh18o5lScBncFtjxm2JwiB-BDHGiuul9JON9f8oVCvTjusfWyIIpJ8X_ESIGIKBewlb_hwb2YmGP6uAYUtGNhWFhVlo7kQhcpaNTBeP2CLVsnnXPDToyug3pmdzOQmXwOZEPGtF2Cy-0pjFGl0Ji0t8N6qnGMlMiQa5DbBwQxHJRPj3V-CDZLZE3_WK0wmLVQgyFXVjuc8b1FQotFmvtPcW5VUSLTZnkyNYYX3t0tGpNDd7an-xxSfs2kltuDp615FZO_oOXapTTfDz4M-km-YcyQQvcR3liny0LWvnRb4ox2LNGk67DU0vTslH8R1VvGx7Tn_ZVMOYmAG2lCpaRhqa_i5m-RFFq2s5Nuki1jt4Ffxx9wZSWJsfFFD9U2Q9qP1xTURB6MP3oWX_28_92yW2U_Y3eKkr_cRt58TxkHRqZMKOXDW_mgnTGgcK92F0LTdFKwBY2tnyn3DiMFsjgD7aIPJwq1Dk8_21bP_BflkXTIOdMG_j47lwPTaZrVn_AuioNBdznQCAQhlbdigCimgrYQyHSwk0feYzlESJCgt3rpUs6jlh6jwAe-mfEeF3ugCm6Va-xNLgnfC-4xhpb4sIrP3_H6xLSqK67wFPu1HcjGfVFhu8khxYyTgOYiOiurB3itn6fHZz2rTNWkt_oEE-XqJtlDpZmufm-qlUvN7AsP2sqgVy-liKrGYVksfnJzH3Itmi4LybX3cB-neMsqav54-34I0yIT-YrEZs1SR28jNkISMDG48UNYcMmx3yUGuceuBZpgcTDBj9Ka2quw6rijbvQjadaaUMdmXMQB31Wx-333wz48o9HgeS0EK1t1ZDl7qhstlsB__OUOmhgd8N-tB-qE9uq2tB0sWGlv9JqRrmMycnE61gNjk7UEUzzxhmt32Rxz57VNVQbzZI0r_d6sXOWYX4-F9ZFuVDH0IW)

READMEに書いてあるようなYAMLファイルを、適当にコピペするなどしてリポジトリに置くと、rubocop-challengeというWorkflowを手動実行できるようになる。

![](https://lh3.googleusercontent.com/docs/ADP-6oHA4gH7k42URpdDW4-QoxZNrnHcDAIxQZhZTiMG6vjpIFgJAxeNlGu0lyWeh9W6RGrcIoal0BgQTW-vIQ_ifqHI-GOCJiVMZWI5a-kG0CBXn1xeywe8qRaQdwpHwfNYNEQAEDV4tdFJwMo4ROMvn--eYWBMbBnNNBmqtDblfwzgAGieMOVMvFF9V_doHS88QNwcmJ76a6aNw_Oe_H6b6skk7vvIGyEJAbU0KctIDIzr5LlY0wHIOpDEa0_YBJ5TjiUGqqzvqHrBCKaEPSNnwjWgsJ6XFQp5U-3VKR82-HS_YCv9VLe0kefKvEcGR5VDKu8ddCGtpHnZXJw7Q4EGUDYhvMhm8vtW9jj-CFQc-ad_mdim4QhjwgpZPqqOBPcdKNKzD26uwA1RwXdb3EhdkfUos9FLS_cc1J-XLHU1Pl0ikiMjOj1Jr0n69O31_KldvDQSTEE_BTyj0tc6Sw_hdeYYSELUTzQcF6xjLzvVM2U9M54XmpBguM3pnwvtsyLNffmniRSSXqrUGNGiozgk8xBiKX-rOwpcZvhqCQ73L-SDE06Er3a3BDNCN0Xdyw3zZiTZrRV8I64dKM9bkU9QUbxql9PKwriem4OAkAVYBCalMSjD27n-qpbjk95m_OPqc5n18tmDysA75i7dudeno_tUe8SfbXOm9HZAXsiDo354C_XNl-X6QTEjcnVkSFk71GVGQYv5I6Cm1k_yeyi1GA7QE0DM59uRmB-OeS1OkGXyey5nkN_LWt7wnRk-DfwbOrjwiA-0zk3rzvMR0ODEIpHJSTkiVye8IJcECFWOq5BBPXdT3esiZ3vpRqh2JTZQl37-fAn4S4BgL4xp6ImNirYRNXhoWywVYC9FOuT5z1F1EcTetvbNW9qd1tBhqSN70bsXTDCwXW_NL7-NChAOD6qnoVxWpjbthOorW9yl2-FFLRhirlpThfK1ixn_HOxZolRDdVMC6XE4Ee9-IbYBZfsdjIt8Mt4ns3GZljRqsJoywY_lO7o34wdgDaa4Z5VCA39iXfSKJ7CX0xrM0GSX3WWy6F6B2jP-RAPQaSo_SsIZIX0aXb8V1obYvcmUZ9GNMLQPKYXNAB-R3z3jOfh5cnWFY2S-o-lNryofJ3sG0ZDTJwbq11ijKfZVnqaEPoehdPd5o6xAKSayGR3jbZpEoG9Gzun3BEpZ8SF-cnWfEQz5U4vTFEzga9m6owFOkEU9vZTgLbgmdDAgkOGR-CsuRweLXTYm5dLx5P1DaeKfSjgnHiGS)

実行すると、Pull Requestがつくられる。デフォルトではランダムでCopが1つ選択される。実質無料ガチャみたいなものだ。今回はStyle/StringLiteralsへの違反に対応してくれたらしい。

![](https://lh3.googleusercontent.com/docs/ADP-6oF_42Ai7mH6bvsoUHVnNbmCV3-LqV_ybIc-1mSkRGVw3rjMN8oNNnM31ppMvoNvTRfptYT6WZ4OCCblARKNzynT3Wl0_3RLXkbECT9W-zN2dQ5sXCxufhmXATFqWIhn4ABbKpQ4lmw2CrPlNQY_pdGDSmLf_4T3qBH_XWTrQcgA0ZAIm6wk_iBdtcDjUnvIQcRA6V3Y7JBYKZsk8wll6xn1dS5hb7LxmAz22irR-lIYd1PUXMfkVQCozUWpMTFxD0CrubNCABgF1GuyKgYcGMyiJ4HAswq8zTw4ZKC4gtprHf6UAUQXqH5Z8poWS9bEVghGo1gA26IGFhFfWX-N71jTNHBo3Wb0n6WmRngCZqe-V5LSdhJgAm72ckCKhZfptVyAXu3wtAJNYE1q-JU1Oz-y1dpgvS5hIfll9k9bldtTceOvUrKmytL3dPN7cDm-VB6QddM4q8lxTURtL7TDTcjhStvASWIL-YN3gx1X25L4z65Gt_zlqHlAw7Bw7ewC_BZpnVC4K-3cdq0_9NfQpdiRFkdnb_IS4tfLscyFkWYn6BDKDylTyXBBEJchLfh-CRVzf_vw4JSKobQu5viZ795w3c7DRB7LS-TACSMgpzJ2N-_OMyJusfyxLgPs87mBECmVtwxIOUfadkWT9VewxajjoTA3jNirdPJT-ZWLJzP_S9lo70IZH814Ofwvf4oz6fCzhZFSGVuibvne3RefBMRwzhCm57whliIxEGNSdX4v0jU9wUOCRiHjAZDNap2ZEtfdA_nzfltE4dxpIfZPDWh5WKAEtCNRUmlHQmtirga5ciMU1uF3sZ6nspUgkXrm20V3mEohGj3QJeiLWJ6f26j-FNYgr3vRrlPr2oo1zNPuKC2AvsKZsYqHmoWCnmEqm-kA7DTfQgOGevBqpd81UUK_6Q1MVnMLc0c_eKS7Kgx0y0Y4TSlcrghkzooqm1QLiSC-hsw0mogSfm3LxtWg4Z5e3TXp_1MzrgDG-fAtRGbcMtw53JxXTL66y-BYeK_LMOMYI_uJaFq5OeMwVN19KQa1OjJJIdRfplNksKRKo_0M4LhrrksqB-7uk4kHPDf49Ps51Ibsy-8XSUALhzPZLuSzmChvod_KK_5N59uOCsdYN6elflbov01ojO0Hl6XChTUIJ1CnMkvZy09vs3kNF6i5CFeq7g6jJtS_xJHPw5UYV0fDFklGLW3rDRwSUS87mx8gjfHwZWGjyGGKPD-Qac1CMB3uHQcxmVZrGEfFuI53ir9N)

差分を見てみると、.rubocop\_todo.ymlや違反のあったファイルが自動修正されていることが分かる。

READMEに書いてあるように、手動実行はCLIからも行える。GitHub Actionsにはスケジュール機能もあるので、慣れてきたら定期的に実行するようにしても良いと思う。

[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)に続く。
