---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (前編)
---
前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionの話をし、[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)では再実装した[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionの話をする。

ただ開発しているだけで、.rubocop\_todo.ymlはそこ此処に積もる。たまに慈善活動的に解消してPull Requestを出したりもする。しかし人力でやっているとキリがない。この作業を自動化したい。こういうときに便利な、[rubocop\_challenger](https://github.com/ryz310/rubocop_challenger)というGemがある。

便利なGemだが、設定しようとすると幾つかハマりどころがあり、導入が大変。そこで、簡単に導入できるように[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom actionをつくった。

![](https://lh3.googleusercontent.com/docs/ADP-6oFqOnjX7DnOeFn9Qcp6YZ7C9I5HmLRqNpB5zaHf5phdFBiMTIreQyLLgJenlPygFkE0JzcuChur3e3GuzgyddeBvfO6qWdmRqlB_6-Pp5S8EQJQztXVicGNrEUS41dGmH00pRpQioV-n36smNvLC-Gt1np-std15yxSQ4yJxpvO86plSfP_0MLQi23J0IVLE7nLP71edFfDTdzy3UHIjnfgAjU6ytraoiLQbLfXPjp9IYpgZhrSmb0iQIO1rJEMDDVwVnt7nL8RINkIaBUu_75ksOlpbXmd3HxZdlg5DZrEmeYzewr1-Reqx9CzYM3fCAQ6r1DVIR6MsaBkkMUEWIgP8r-3tGuRGcUmd4j3M1-MCqfsF8zY2ccHw-2Dv-hTcQw_oWFF1gqgt3jLLALPXw3OjyPS5Mt938j9VasIr-UAbGT4VoMEj_uddq_1d-XOZ7TT_cOMg7Ry6DmQh3lcDb1jZkHzsAG4fnpTWfIls0Rr83FVaJzKFhKV_CS8WpfDt-0f7yc9OzcgiJy5GS8Le2pjeJIgtBvYZ-NOuSfrlkO4AuqzRXIsGM7IA63_bjOcdhXh2rG-SgWIw2A6V5KzaWOJpMri2jzZ2AZftzT_iFeB9YzEHmXBlVLq8jDBsKdUJJ79Tn7bQDwoVzLr60KpY8l-1ca1yLtDGokEDkwhWEvPDPN1jzsLf4sD-TMao-idl2Hvgr6AV07EntnbMQKgkb0PJp5iDIYjX0QP3x8nSsp_eHpFBkjSmepUEZKdJ7xlBzLgAtEmTNFeQaG2FrKlAjd-8yEPHplY6Zh1qC0uTzrR4AJTS81T1OhAIQ9FTtFOC_EEmWrCSa4aNSe0CqlMZFhJoyHo4DY_gi-_SoDxsXf1_k3CbGkEy5GZzjxSrqvFRwt-k8LODaxK2IimgoPtFHMWCsDwRjwC-EG67--eWQkBeM58-w4gUgGwEy7Ml3dqw7-oqUKF1SMySdAgxIFxxfHSGsD1t6sr_K96EnmgXUg1K3bxJDdNKY36sebo-fPRL_X4SDloVijb9X6tJxt1NoksMUpi-rLXTDtSjzAfgSNG2DH9nphjlPFiT5N1mnseCCEhrASx4So9RYyq_WPaJtbEl6cL5v-Tym23LFECwQH3Q_iKLV3hew3MCWokbxparswJ_vGbO1r-d-Mj5fdd4w9vo9QpmkvLAB1ER9UO2V_ZLEHf3bzkAvt-jheQlp8Cs8DzEexdvxczZ_JwgR9oroEVK3un0uAjLdDFbDLpDJVrxkNx)

READMEに書いてあるようなYAMLファイルを、適当にコピペするなどしてリポジトリに置くと、rubocop-challengeというWorkflowを手動実行できるようになる。

![](https://lh3.googleusercontent.com/docs/ADP-6oGN_ZpiuJvSgJkZ9m7av1IiaGast2mht0RNoFhPfrvEpWVkVUFaTJUFZpsH04i4QlOmWPMSNrQ_ZIEXDJn1zRBCZlqPDbCuplP2w5B0b0XcqzR9L_Kj_nNmsg0YBIGcHxrmUvckbAG7d2bT0wp6USQDJB23L4-wcYVDbVXUNBiFNNjAIYQE-FM042BkKZ-16_La2yxNZvH_0kB6dcNSdBjJtKWRXbmwnBZSS7oOIlAWiq7rmn8paxJDb98NVDWumHrAQKELCw9KyRYwXelUXO1oBkm-jWanG0cUwi3YstgoysLBGIOTJdngla-qNA_odYdssxddVqMbozkPTeXXx7Wb6Dr7G-om3SONlahkrOAi9ZfsdqhobPlfShXkB6FhLEbI-N9L7qc_iH-dGZn3fze4VhQllTpX1KenkFaeNTaI956P-i7y4SkwRddpPWzEiIPxvCQJl3A5FxpRFaUJoDdVgeY9TxtG5caCXztkk_m8a-K8f9aaaK5Y7kfxUjCt_LT22MBYm_U1vwJNQAt3gq_-4mHsMj7wMdtov7gLo2qE5bZIgUifZZ88o1oylBZzyYy-2HbXpitBq7GeB482qQTH8x6vnD0jM09_3eE5jNw9HdrCfV-kJV_bmhWUbvIo_LZCfigJihtHknXeJVHeLZb3eFIMx0T_DS5XZNHATtnjJSqcfYeTRMy1R9Zi91X8N9g_bZ8oCwhDwMTi2Wf6bkwGHAAYnP-BxP6WvKQnkzUkTovZvgbi3UGFTQBhf1mW0GypzNuAuk9m4J9ApuO7oV53TQkowlyHknKDeC5_5k5ivtrl4pBMoJ7KRH_oZmkO4wZpQ9iYDzpCGKhCxGVqa29kustVh0YGe_bckyXIEpQsYK3UQzdd5uwr_m5OsCvCJfKctD5go5e6qxrfVZUY3F4qR7P6waQhh2JoKuqXiCJSWKEoTh9hluE0bsdnIUXCytgEdXwaKUFQ-t_QnXEPNiSiMZJ9QYUqe4J8lHaEPZkemmHBOZpbXMJyXQj69XoQgTZQ0XxeFbW2Hem6WrhwED3zzhSEy5gHNmHgEBBMwDQ3az44UF982zddsI684ofFWAWMvSP3GWlRK5gF170vRbj-dMFW-43eb1cF1ocmjH6Qf4P5texEacrg96ih9q6z9JzXAa3MF5puvQ13pvjZk5obSpqT_6KD7prhD6nZgcEce4FrSiUd4IJ0Pc-2aUgsOhB7DCj5uCqzp6uT7kJnO_xiUiTeziBsc1i4hufWHVkJKEpe)

実行すると、Pull Requestがつくられる。デフォルトではランダムでCopが1つ選択される。実質無料ガチャみたいなものだ。今回はStyle/StringLiteralsへの違反に対応してくれたらしい。

![](https://lh3.googleusercontent.com/docs/ADP-6oF-ZH60ayGmZEoner6sfHcerihwEzfqdcirzwOuLf9RDIVDZAkC_SCPSoGleTYOBxQ1ClQo70yAaEJlq4kvkUMHwIePSfpzH-tHnJKvrfr_sIX294T-jFFyj9iylejmwm9BGg5QTtpmjnUr_Q-uRlbfxVjndSdn3GyK5War-vF-YFTud6-BDcQIfmM_t6-JLcaSNWWUWHOqtBaysUE-pPBhinJjtNosL0Y8Yij3KMcEdbk6yzjVOhZ9xYvxJNXscqgmujFChQtgUUeXR5LuCCJu9Pt3qFLYd6_AsrAzGoMlqhd22bzeBSn54yMXf0a1f7is71Lcvk6OrOLNSPz4X5974kSBCg5IvgQ_TsLQA4bd8mWy044RO939sRk1axA1biCKZijE210nrZtRE4Gw8IL8DyKvhbd4pfQ-LQL1ENN8dy9M9bHgcYS7xaqeFAUSshwEJdPKM2DwC6sAXGoBl_iz7ZZ-KE6QAzcvj0DYgFWWGIOuSJCEYz6e4dOX_DB17FOPleUWDaeBFwy2spqpxQXBcscicRikli9Bfr4dmLA3arViSu2zcUPJlDppNko728uJXxvPOvVc8cjcUYfbUkO3yq5dhgagT34sjmF661dcDGAT-uk-7U1P2I8C8B1EnZgKNmAAvnzRB32LZzQpQlaR57OUdP0M0qR-qvPq0HB1YvCXhWvOvMeE5CZlDRdTmj1hAvH_KiyXysWkXuHZeywGsFW5odciKsLSyzqNzhM588HvcJih10zUcQTkmmxdcq5x_lvN5Jz-3PAc-GYl2mNVdzev9HkGgBTAWfqmzWhUg_tn5RYLK-dGZHoW53SmQKd0NZirm-e6-h_i4ffooaCK-UQ2i-uKcywZUSZv2GbvyplLimXLkWJFU0B_nju499ErCcfzBq1viDwOC5l8DfDtQa0ry6JLeq1VkshUuuaeBE1ZBLJ2Rrn8HpWTLNLFCTwjVte-em6ijgYLlZh7onwY00CzXf8fX1jXdlFBjwi-6HZWeVHEUD8kGoxoENN3N1NI8tJD21lT4r1KxkY-OID98D4_Dk3H5Yqn7CfohJJNCkc-7qMonosJTRxslqzio9_VEQX8l2B8LVSpGQdZ205h0528cUI44S_Mpkd-FuLHQwVvU3n4k3Ww98ssk7wP6bW8RCCxnOOmRk2Ja6vfg7NPOvhac59d91-AZosb-LaRZhBCJ75NUli8kHwmpXZl4qLKEzRcDdXvDrUCi1SPeO8tfP9HUmOaL6Ptmzeqo_RRJrvb)

差分を見てみると、.rubocop\_todo.ymlや違反のあったファイルが自動修正されていることが分かる。

READMEに書いてあるように、手動実行はCLIからも行える。GitHub Actionsにはスケジュール機能もあるので、慣れてきたら定期的に実行するようにしても良いと思う。

[後編](https://r7kamura.com/articles/2022-05-15-rubocop-todo-corrector)に続く。
