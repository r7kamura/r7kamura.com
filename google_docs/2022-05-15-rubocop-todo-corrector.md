---
title: .rubocop_todo.ymlを解消するPull RequestをGitHub Actionsで自動生成する (後編)
---
[前編](https://r7kamura.com/articles/2022-05-13-rubocop-challenge)の続き。

前編では[r7kamura/rubocop-challenge](https://github.com/r7kamura/rubocop-challenge)というCustom Actionをつくった。ごく単純なリポジトリでは問題無く動作する。しかし大きなリポジトリに導入してみると、使っているRuboCopのプラグインに起因する依存関係の問題でまともに動かないことが分かった。そこで、自分のユースケースに合うものを一から実装した。

[r7kamura/rubocop-todo-corrector](https://github.com/r7kamura/rubocop-todo-corrector)というCustom Actionが出来上がった。これは依存関係で問題が起きづらい。使われているRuboCopのプラグインを解析し、適切なバージョンのGem群をインストールして使う。

実装は簡素なものになった。[Rubyに関する処理だけを担当するコマンドラインツール](https://github.com/r7kamura/rubocop_todo_corrector)を用意し、Gitに関する処理はGitのコマンドで、GitHubに関する処理はGitHub CLIのコマンドで行っている。

![](https://lh3.googleusercontent.com/docs/ADP-6oGtEcEbGMH3rrMYulqGxoucwrdx94PTEWIzn6e0OVwHsztBqud8vHgex2tYVg4DN4pqDOkG6ajjQ_qlEzxLf5cTyCt1t4r519v2X0gJ-J4Li-BwpicQaE5qeTkojR2aRyTMpEUoZiE1da0u6MFQPmaEnAxUUtsdH-VUS7MCgqxD44Iz02fwa2cPirl46eog9PpDoylJQsCsMu8rYBAmX7euMjlxlLrFt_dp3AAYz84yId7sf4KtLDTLdzMW7W6_94xbXlZq73v5_cL8zk-hR9pSNx_NCCwisvdRV-dPdqVi97FGxN1QlQEDoShPeLS5z6g2u1V_kNWS-aZa-0Ij9Fe7ncTFHc4mR_Ug90wX4ZA6J739dq5JaHHNBI6qvcvzZR13bIJThKZSizZ5azAmaTR2yxmdrfUCB_MIk5Edr5zpGhQFYIP3jn_OXemIfTsle72C76zovF7k8mfUzAf0PyKPqWJ2TQ4CC1jIi-FoYhY5N6KBFq35ZJSTSYXODdBZKnombthJDcjt_DFnArnNBgV1-edW8vQ-AIyaIJ8fJvOPob8HJU7H0JC-Sj6A_Ql4k_kO3eMkn95eMpKwQcBaAu8ytklnKwkDeMlLTK5J8oI14pmBjZoidZqM7Gmxzav2CEPkHA5Q3V6WWJ8G5ixjkG-Thld2o4BhDsLSqI5MBuYRsIHYIQdyTlr-IRkRWodrVTTojLxKeg_NaZpe7ZT8dBZLwPesG-DzNdozhTju4gl2xYk9eJlm4lvQN4d-PZkA6kBXNJ3Kygi_yWZtOpZOqqYmBcCa_EVS-fBQcoScxrR0xDCj9PsSiY5RLbkBHRNcE0n3r17lOG4PYvVoTwIDdPGnG5DgYGxlQHXcanOWZtYt8ze4zcVSrWY0WE5TgwxPiPKrQ0sduENe37Sptlbnmubm9YLWj_cQkIsVfWojD3zRlmKiL1D_fsYtqxVYHZroLJvMqk_X94Gjcf_ciNcIs74nMz-gTBV9Y-zEUyixzYNZWGOfKRqb2TGQy7pytiCe7O6XsuPrXprrAzJ7wL98JUUaSSJHqniEuC8Ol7pT6OIMf-VYSfy_5TRmiyuZbjkqCpr76qieKk_-TQdACOUgtsYLURI4xytwoAB8U8ydGVHVSpaAOim4uOYfXzRLrcuFSYDAxHB2u5tVTep-PaOCM1qqK4Hi1Je3BpO5d0CSMTQ0vYWTStMmP_5piC4fcpGxGPQM2zS8Blv8cbuO9CPvbSodpDCiy0WeXurFkLAZwSCJ3g7D)

前編と同じく、実際に動かしている画面を掲載する。READMEに書かれている通りにYAMLファイルを置くと、上のようなボタンが表示されるようになる。

![](https://lh3.googleusercontent.com/docs/ADP-6oEl9il-aTDV49MCT2w6HY52L6QQP947OiDqvbGIoUkExBx2nu3TvYJWqxl61LYQ-JrJvFLwtinYD2yVyaufhzVgYjs-TDmRpzNqMXK0caVNcdXpClN5U_O-8nWyVVQsNlevmaMsDRbkzbPvJXj_yiftQ3TgzFkMNbaQJe85ay0NCapuSclGvIuxwT_w8CJTPPc5C0u2s8fVz0n6OKGLXocL-rq-eE5ELV1gto4SmJZFvcRtodZz5ZFgY5Yl6LJ4hzzCnyUFqc-opgiKxsDc5c_3zR30CjfpJktcomJJaBQI0Wf1dNQz0xiwfPTzRDhPZTOyVeqmjr4txXuXmyK6B_5GGI6b29VDytcv8DdMZXhISD11qTrWOXpyzW2EdPFPTpDHgmEob2jmZua5PnsWP3V9vYVSJXcFhpRgff9-OWxcWb-qoDPi_yaQBxbClQlQUGx_yfgAcn8_StYR_dEK3rJ8pE273DyPQZcxg6gWCpSvB25tBY1Ll_MrV8l95gFDbi-G5uwo8U9Q_XDWNZCGqm9kbzWx2BHa37L9EB6l7IosQDOOj9frG3-ytc0tiWKMKM3HmHXcXDyVqPgbSWZbFXXArdBfPKtPRgdxyC6viT_xOV3svS7ARpewze9E2FDufqpQCV8W-YwGfTspfGwG3DHrJkNMjxPTOO9LQ7LdJm9swjz6j1WDcCZoP_u-gd2oG-JOYR9nfEBewunjUvWDSAzeIjYkqd8rX8-pyEczRnX-KkwTnzHKLUPWBalHWwGIk0swIuAZiHNcT7EqBoJATIpLC6aPwVEPgjlu-7sIGXsl_Ur_ef7CBYxVIiPkc3GRwXF00NRluLFNswyl404y65qfNeMFyNnQhpC0ALWl0V57shVoeONoO0gmJHOP9SHyumAXow3kYwhLzJrBcbDFnuWYYWJonN-vGLSdBIytAtLG4ywV6WonO4ris2HGo3v01PyJeKmcxPus0tD_Nh33CusQ8Ytfv8qZZKsVLyZEs2ZHTwtbxKl1i5JBHp3TGfS_KwWM2_IMkrhKilA2jJq4oBS9CRfbLV3mU0iPcuWQ3WUDMBBMNAnJrDiCKvXkzA3psV1GjtcSLEbjCIlHdHd7CvSxrOKKMHEXuL2B1WfopgYFMzsU_0ORiDPoiMlX8eAFzulqBxt4goX2RgQLBgSW842fVwA-oJ7ygHReoUEFqZp7R-PYe5tI7SeB3nCmUaFXqYEM4aywsjwePQ38JFhT6XSJNvCg7N7oVHjNx9inU9oc89CH)

ボタンを押すと、1分ほどで上のPull Requestが作成される。
