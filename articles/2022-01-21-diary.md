---
title: 日記
---

昼まで寝てしまい、予約していた歯医者に行き、ついでに雲呑麺を食べ、珈琲屋で一息付こうと思うも感染が怖いのでさっさと帰宅。そこから眠くなってまた深夜まで寝る、という堕落した一日だった。

携わっているRailsアプリにerbcopを投入してみたところ、不具合が見つかったので修正した。ERBでは `<%# ... %>` という形でコメントを書ける。erbcopで利用しているBetterHtmlというERBパーサーでは、単純にやるとこれもRubyのコードと見なしてしまうので、対策を加えたというもの。erbcopと似たような実装であるerb-lintではどうなっているのか調べたところ、……似たような問題が過去に修正されていた。

- <https://github.com/r7kamura/erbcop/pull/1>
- <https://github.com/Shopify/erb-lint/pull/59>

テンプレートが数千ファイルもあるようなプロジェクトに導入していると、RuboCopのように並列実行オプションがあると良いなと思う機会が増えてきたので、RuboCopがどうやっているか読んでみようと思う。
